<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="/___vscode_livepreview_injected_script"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello People TV</title>
    <script src="live/scripts.js"></script>
    <link rel="stylesheet" href="live/styles.css">
</head>
<body>

    <!-- Preloader Section -->
    <div class="preloader" id="preloader">
        <div class="spinner"></div>
    </div>

    <!-- TV Container Section -->
    <div class="tv-container">
        <div class="player">
            <div id="player"></div> <!-- This will hold the iframe for the video player -->
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" id="search-input" class="search-input" placeholder="Search Channels..." oninput="searchChannels()">
        </div>
        
        <div class="category-list" id="category-list"></div> <!-- Categories will be rendered here -->
        
        <div class="channel-list" id="channel-list"></div> <!-- Channel list will be rendered here -->
    </div>

    <footer>
        <p>&copy; 2024 Hello People TV. All rights reserved.</p>
    </footer>

    <script>
        let allChannels = [];
        let categories = new Set();

        // Function to parse the playlist
        function parseM3U8(playlist) {
            const lines = playlist.split('\n');
            let channels = [];
            let currentChannel = {};
            
            lines.forEach(line => {
                if (line.startsWith('#EXTINF')) {
                    const name = line.split(',')[1];
                    const logoMatch = line.match(/tvg-logo="(.+?)"/);
                    const logo = logoMatch ? logoMatch[1] : '';
                    const groupTitleMatch = line.match(/group-title="(.+?)"/);
                    const groupTitle = groupTitleMatch ? groupTitleMatch[1] : 'Other';
                    currentChannel = { name, logo, groupTitle };
                    categories.add(groupTitle); // Add category to the set
                } else if (line.startsWith('http')) {
                    currentChannel.url = line.trim();
                    channels.push(currentChannel);
                    currentChannel = {};
                }
            });
            
            return channels;
        }

        // Function to render the category list
        function renderCategoryList() {
            const categoryList = document.getElementById('category-list');
            categoryList.innerHTML = ''; // Clear previous categories

            // Add "All Channels" category first
            const allItem = document.createElement('div');
            allItem.classList.add('category-item', 'selected'); // Set as selected initially
            allItem.textContent = "All Channels";
            allItem.addEventListener('click', () => {
                renderChannelList(allChannels);
                setSelectedCategory(allItem);
            });
            categoryList.appendChild(allItem);

            categories.forEach(category => {
                const categoryItem = document.createElement('div');
                categoryItem.classList.add('category-item');
                categoryItem.textContent = category;
                categoryItem.addEventListener('click', () => {
                    filterChannelsByCategory(category);
                    setSelectedCategory(categoryItem);
                });
                categoryList.appendChild(categoryItem);
            });
        }

        function setSelectedCategory(selectedItem) {
            const categoryItems = document.querySelectorAll('.category-item');
            categoryItems.forEach(item => {
                item.classList.remove('selected');
            });
            selectedItem.classList.add('selected');
        }

        // Function to render the channel list
        function renderChannelList(channels) {
            const channelList = document.getElementById('channel-list');
            channelList.innerHTML = ''; // Clear previous channels
            channels.forEach((channel) => {
                const channelItem = document.createElement('div');
                channelItem.classList.add('channel-item');
                channelItem.innerHTML = `
                    <img src="${channel.logo}" alt="${channel.name}">
                    <span>${channel.name}</span>
                `;
                channelItem.addEventListener('click', () => {
                    playChannel(channel.url);
                    setSelectedChannel(channelItem);
                });
                channelList.appendChild(channelItem);
            });
        }

        function setSelectedChannel(selectedItem) {
            const channelItems = document.querySelectorAll('.channel-item');
            channelItems.forEach(item => {
                item.classList.remove('selected');
            });
            selectedItem.classList.add('selected');
        }

        // Function to filter channels by selected category
        function filterChannelsByCategory(category) {
            const filteredChannels = allChannels.filter(channel => channel.groupTitle === category);
            renderChannelList(filteredChannels);
        }

        // Function to play the selected channel in the iframe
        function playChannel(url) {
            const player = document.getElementById('player');
            player.innerHTML = `<iframe src="${url}" allowfullscreen></iframe>`;
        }

        // Function to search channels
        function searchChannels() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const filteredChannels = allChannels.filter(channel => 
                channel.name.toLowerCase().includes(query)
            );
            renderChannelList(filteredChannels);
        }

        // Fetch the playlist from the external file
        fetch('live/fockyou12010.html')
            .then(response => response.text())
            .then(playlist => {
                allChannels = parseM3U8(playlist);
                renderCategoryList();
                renderChannelList(allChannels);
                document.getElementById('preloader').style.display = 'none'; // Hide preloader on success
            })
            .catch(error => {
                console.error('Error fetching the playlist:', error);
                alert('Failed to load the channel list. Please try again later.');
                document.getElementById('preloader').style.display = 'none'; // Hide preloader on error
            });
            // Define the allowed domain (change this to your specific domain)
    const allowedDomain = "hellopeopletv.vercel.app";  // Replace with the desired domain

// Check if the current domain is the allowed domain
if (window.location.hostname !== allowedDomain) {
  // Show an alert message
  alert("You are being redirected because the current domain is not allowed Fockyou.");

  // Redirect to the allowed domain (change this URL to the one you want to redirect to)
  window.location.href = "https://example.com";  // Replace with your redirect URL
}
    </script>
     <center>
        <script type="text/javascript" src="//widget.supercounters.com/ssl/online_i.js"></script><script type="text/javascript">sc_online_i(1700108,"ffffff","e61c1c");</script><br><noscript><a href="https://www.supercounters.com/">free online counter</a></noscript>
        </center>
                <center> 
                 <a href='http://www.freevisitorcounters.com'>freevisitorcounters</a> <script type='text/javascript' src='https://www.freevisitorcounters.com/auth.php?id=516768d54bcf476fe9ecfe80d0080b7e3a704fc6'></script>
        <script type="text/javascript" src="https://www.freevisitorcounters.com/en/home/counter/1238598/t/0"></script>
        <br><br>
                </center>
 <script disable-devtool-auto src='https://cdn.jsdelivr.net/npm/disable-devtool@latest'></script>
</body>
</html>
